CONFIG:
  NAME: slimeBoss
  MAX_HP: 90
  HURT_SOUND_EFFECT: "slimeHit.ogg"
  #INVINCIBLE: false
  BOUNDS:
    IMAGE_WIDTH: 32
    IMAGE_HEIGHT: 32
    SHADOW_WIDTH: 32
    SHADOW_HEIGHT: 32
    HITBOX_RADIUS: 16
BEHAVIOURS:
  ShortJump:
    ACTION: Charge
    POST_HIT_ROUTINE: NONE
    ANIMATION:
      TYPE: SINGLE_ANIMATION
      IMAGE_NAME: "slimeBoss"
      FPS: 5
      LOOP: true
    CONFIG:
      MAX_TIME: 1
      jump_height: 15
      speed: 1.4
      start_sound_effect: "slimeJump.ogg"
      end_sound_effect: "slimeLand.ogg"

  LongJump:
    ACTION: Charge
    POST_HIT_ROUTINE: phase1
    COPY_ANIMATION: ShortJump
    CONFIG:
      MAX_TIME: .75
      jump_height: 15
      speed: 3
      start_sound_effect: "slimeJump.ogg"
      end_sound_effect: "slimeLand.ogg"

  SimmerTowardsPlayer:
    POST_HIT_ROUTINE: NONE
    COPY_ANIMATION: ShortJump
    CONFIG:
      MAX_TIME: 4
      speed_min: .2
      speed_max: 1.7
      slime_trail_sound_effect: "slimeHit.ogg"

  SimmerTelegraph:
    ACTION: Squish
    POST_HIT_ROUTINE: NONE
    COPY_ANIMATION: SimmerTowardsPlayer
    CONFIG:
      MAX_TIME: 2
      AMOUNT: .6

  ShortJumpTelegraph:
    ACTION: Squish
    POST_HIT_ROUTINE: NONE
    COPY_ANIMATION: ShortJump
    CONFIG:
      MAX_TIME: 1
      AMOUNT: 1.2

  LongJumpTelegraph:
    ACTION: Squish
    POST_HIT_ROUTINE: NONE
    COPY_ANIMATION: LongJump
    CONFIG:
      MAX_TIME: 1.5
      AMOUNT: 2

  #Zigzag Behaviours
  FirstDashLeft:
    ACTION: Charge
    POST_HIT_ROUTINE: NONE
    COPY_ANIMATION: ShortJump
    CONFIG:
      MAX_TIME: .1
      speed: 4
      jump_height: 5
      accelerate: false
      has_afterimages: true
      angle_of_approach_from_perpendicular: 30
      movement_direction_type: "LeftOfPlayer"
      start_sound_effect: "dash.ogg"
      end_sound_effect:
  DashLeft:
    ACTION: Charge
    POST_HIT_ROUTINE: NONE
    COPY_ANIMATION: ShortJump
    COPY_CONFIG: FirstDashLeft
    CONFIG:
      speed: 8
      updates_player_angle_on_enter: false
  DashRight:
    ACTION: Charge
    POST_HIT_ROUTINE: NONE
    COPY_ANIMATION: ShortJump
    COPY_CONFIG: DashLeft
    CONFIG:
      movement_direction_type: "RightOfPlayer"
  ZigzagTelegraph:
    #Charge with 0 speed = Jump in place
    ACTION: Charge
    POST_HIT_ROUTINE: NONE
    COPY_ANIMATION: ShortJump
    CONFIG:
      MAX_TIME: 1.5
      speed: 0
      jump_height: 30
      start_sound_effect: "slimeJump.ogg"
      end_sound_effect: "slimeLand.ogg"
  DoNothing:
    ACTION: Idle
    POST_HIT_ROUTINE: NONE
    COPY_ANIMATION: ShortJump
    CONFIG:
      TIME_MAX: 0.1
      TIME_MIN: 0.1

ROUTINES:
  start:
    CYCLE:
      - BEHAVIOUR: ShortJumpTelegraph
      - BEHAVIOUR: ShortJump
      - BEHAVIOUR: ShortJumpTelegraph
      - BEHAVIOUR: ShortJump
      - BEHAVIOUR: ShortJumpTelegraph
      - BEHAVIOUR: ShortJump
      - BEHAVIOUR: LongJumpTelegraph
      - BEHAVIOUR: LongJump
      - BEHAVIOUR: LongJumpTelegraph
      - BEHAVIOUR: LongJump
      - BEHAVIOUR: SimmerTelegraph
      - BEHAVIOUR: SimmerTowardsPlayer
    TRANSITIONS:
      - NO_REPEAT: phase1
  simmer:
    CYCLE:
      - BEHAVIOUR: SimmerTelegraph
      - BEHAVIOUR: SimmerTowardsPlayer
    TRANSITIONS:
      - NO_REPEAT: phase1
  longJump:
    CYCLE:
      - BEHAVIOUR: LongJumpTelegraph
      - BEHAVIOUR: LongJump
    TRANSITIONS:
      - NO_REPEAT: phase1
  shortJump:
    CYCLE:
      - BEHAVIOUR: ShortJumpTelegraph
      - BEHAVIOUR: ShortJump
    TRANSITIONS:
      - NO_REPEAT: phase1

  phase1:
    CYCLE:
      - BEHAVIOUR: DoNothing
    TRANSITIONS:
      - ON_CONDITION: "finished(LongJump) && random(.5)"
        GO_TO: zigzag
      - ON_CONDITION: "true"
        GO_TO:
          simmer: .25
          longJump: .5
          shortJump: else
  zigzag:
    CYCLE:
      - BEHAVIOUR: FirstDashLeft
      - BEHAVIOUR: DashRight
      - BEHAVIOUR: DashLeft
      - BEHAVIOUR: DashRight
      - BEHAVIOUR: DashLeft
      - BEHAVIOUR: DashRight
      - BEHAVIOUR: DashLeft
      - BEHAVIOUR: DashRight
      - BEHAVIOUR: DashLeft
      - BEHAVIOUR: DashRight
      - BEHAVIOUR: DashLeft
      - BEHAVIOUR: DashRight
      - BEHAVIOUR: DashLeft
      - BEHAVIOUR: DashRight
    TRANSITIONS:
      - NO_REPEAT: phase1